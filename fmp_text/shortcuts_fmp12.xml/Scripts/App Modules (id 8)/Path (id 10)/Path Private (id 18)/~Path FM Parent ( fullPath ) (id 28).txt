#
# Return the parent path.
# If the path is to a file, it will be the path to the directory the file exists in.
# If the path is to a directory, it will be the path to parent directory.
#
#
Set Variable [ $path; Value:Trim ( Get ( ScriptParameter ) ) ]
#
#
# convert to FM Path
Perform Script [ “~Path: FM ( fullPath )”; Parameter: $path ]
Set Variable [ $path; Value:Get ( ScriptResult ) ]
#
#
# remove last node
Set Variable [ $lastSeparator; Value:Position ( $path ; "/" ; Length ( $path ) ; -1 ) ]
If [ $lastSeparator = 0 ]
Set Variable [ $path; Value:/* error: last separator not found */"" ]
Else
Set Variable [ $path; Value:Left ( $path ; $lastSeparator - 1 ) ]
End If
#
#
Exit Script [ Result: $path ]
#


---
Script:
  includeInMenu: 'False'
  runFullAccess: 'True'
  id: '28'
  name: '~Path: FM: Parent ( fullPath )'
  StepList:
    Step:
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '#'
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '# Return the parent path.'
      Text: ' Return the parent path.'
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '# If the path is to a file, it will be the path to the directory
        the file exists in.'
      Text: ' If the path is to a file, it will be the path to the directory the file
        exists in.'
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '# If the path is to a directory, it will be the path to parent directory.'
      Text: ' If the path is to a directory, it will be the path to parent directory.'
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '#'
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '#'
    - enable: 'True'
      id: '141'
      name: Set Variable
      StepText: Set Variable [ $path; Value:Trim ( Get ( ScriptParameter ) ) ]
      Value:
        Calculation: Trim ( Get ( ScriptParameter ) )
        DisplayCalculation:
          Chunk:
          - Trim
          - ' ( '
          - Get
          - ' ( '
          - ScriptParameter
          - ' ) )'
      Repetition:
        Calculation: '1'
        DisplayCalculation:
          Chunk: '1'
      Name: $path
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '#'
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '#'
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '# convert to FM Path'
      Text: ' convert to FM Path'
    - enable: 'True'
      id: '1'
      name: Perform Script
      StepText: 'Perform Script [ “~Path: FM ( fullPath )”; Parameter: $path ]'
      Calculation: $path
      DisplayCalculation:
        Chunk: $path
      Script:
        id: '20'
        name: '~Path: FM ( fullPath )'
    - enable: 'True'
      id: '141'
      name: Set Variable
      StepText: Set Variable [ $path; Value:Get ( ScriptResult ) ]
      Value:
        Calculation: Get ( ScriptResult )
        DisplayCalculation:
          Chunk:
          - Get
          - ' ( '
          - ScriptResult
          - ' )'
      Repetition:
        Calculation: '1'
        DisplayCalculation:
          Chunk: '1'
      Name: $path
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '#'
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '#'
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '# remove last node'
      Text: ' remove last node'
    - enable: 'True'
      id: '141'
      name: Set Variable
      StepText: Set Variable [ $lastSeparator; Value:Position ( $path ; "/" ; Length
        ( $path ) ; -1 ) ]
      Value:
        Calculation: Position ( $path ; "/" ; Length ( $path ) ; -1 )
        DisplayCalculation:
          Chunk:
          - Position
          - ' ( $path ; "/" ; '
          - Length
          - ' ( $path ) ; -1 )'
      Repetition:
        Calculation: '1'
        DisplayCalculation:
          Chunk: '1'
      Name: $lastSeparator
    - enable: 'True'
      id: '68'
      name: If
      StepText: If [ $lastSeparator = 0 ]
      Calculation: $lastSeparator = 0
      DisplayCalculation:
        Chunk: $lastSeparator = 0
    - enable: 'True'
      id: '141'
      name: Set Variable
      StepText: |-
        Set Variable [ $path; Value:/* error: last separator not found */

        "" ]
      Value:
        Calculation: |-
          /* error: last separator not found */

          ""
        DisplayCalculation:
          Chunk: |-
            /* error: last separator not found */

            ""
      Repetition:
        Calculation: '1'
        DisplayCalculation:
          Chunk: '1'
      Name: $path
    - enable: 'True'
      id: '69'
      name: Else
      StepText: Else
    - enable: 'True'
      id: '141'
      name: Set Variable
      StepText: Set Variable [ $path; Value:Left ( $path ; $lastSeparator - 1 ) ]
      Value:
        Calculation: Left ( $path ; $lastSeparator - 1 )
        DisplayCalculation:
          Chunk:
          - Left
          - ' ( $path ; $lastSeparator - 1 )'
      Repetition:
        Calculation: '1'
        DisplayCalculation:
          Chunk: '1'
      Name: $path
    - enable: 'True'
      id: '70'
      name: End If
      StepText: End If
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '#'
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '#'
    - enable: 'True'
      id: '103'
      name: Exit Script
      StepText: 'Exit Script [ Result: $path ]'
      Calculation: $path
      DisplayCalculation:
        Chunk: $path
    - enable: 'True'
      id: '89'
      name: Comment
      StepText: '#'
